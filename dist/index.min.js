"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,i){if(null==t)throw new TypeError("null to object");for(var s=Object(t),n=1;n<arguments.length;n++){var h=arguments[n];if(null!=h)for(var e in h)Object.prototype.hasOwnProperty.call(h,e)&&(s[e]=h[e])}return s},writable:!0,t:!0}),"function"!=typeof Array.from&&(Array.from=function(t){return[].slice.call(t)});var buildElement=function(t){var i=document.implementation.createHTMLDocument("");return i.body.innerHTML=t,Array.from(i.body.children)[0]},triggerEvent=function(t,i){var s=document.createEvent("HTMLEvents");s.initEvent(i,!0,!1),t.dispatchEvent(s)},definePinchZoom=function(){function t(t,i){this.i=t,this.h=1,this.o=1,this.offset={x:0,y:0},this.u={x:0,y:0},this.l=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),this.options=Object.assign({},this.m,i),this.v(),this.g(),this.update(),this.p(this.i)&&(this.M(),this.A()),this.enable()}function i(t,i){return t+i}t.prototype={m:{O:2,Z:1.3,animationDuration:300,maxZoom:4,minZoom:.5,D:!0,P:!1,N:!1,T:!0,_:!1,j:"pz_zoomstart",k:"pz_zoomupdate",C:"pz_zoomend",F:"pz_dragstart",I:"pz_dragupdate",S:"pz_dragend",U:"pz_doubletap",W:"pz_mousewheel",Y:0,q:0,G:null,L:null,R:null,H:null,V:null,X:null,B:null,J:null},K:function(t){triggerEvent(this.i,this.options.F),"function"==typeof this.options.H&&this.options.H(this,t),this.$(),this.tt=!1,this.it=!0,this.st(t)},st:function(t){"touchend"!==t.type&&(t="touchmove"===t.type?this.nt(t)[0]:this.ht(t),this.et(t,this.tt),this.offset=this.ot(this.offset),this.tt=t)},rt:function(){triggerEvent(this.i,this.options.S),"function"==typeof this.options.V&&this.options.V(this,event),this.end()},ut:function(t){triggerEvent(this.i,this.options.j),"function"==typeof this.options.G&&this.options.G(this,t),this.$(),this.o=1,this.ct=0,this.ft=!1,this.it=!0},dt:function(t,i){var t=this.lt(this.nt(t)),s=i/this.o;this.o=i,this.ct+=1,3<this.ct&&(this.scale(s,t),this.et(t,this.ft)),this.ft=t},vt:function(){triggerEvent(this.i,this.options.C),"function"==typeof this.options.L&&this.options.L(this,event),this.end()},handleDoubleTap:function(t){var i=this.nt(t)[0],s=1<this.h?1:this.options.O,n=this.h,h=function(t){this.gt(n+t*(s-n),i)}.bind(this);this.it||(this.yt=!0,s<n&&(i=this.zt()),this.animate(this.options.animationDuration,h,this.Et),triggerEvent(this.i,this.options.U),"function"==typeof this.options.B&&this.options.B(this,t))},xt:function(){this.u={x:-Math.abs(this.i.offsetWidth*this.bt()-this.Mt.offsetWidth)/2,y:-Math.abs(this.i.offsetHeight*this.bt()-this.Mt.offsetHeight)/2}},wt:function(){this.offset.x=this.u.x,this.offset.y=this.u.y},p:function(t){return"IMG"===t.nodeName?t.complete&&0!==t.naturalHeight:Array.from(t.querySelectorAll("img")).every(this.p)},A:function(){this.options.N&&this.At||(this.At=!0,this.xt(),this.wt())},ot:function(t){var i=this.i.offsetWidth*this.bt()*this.h,s=this.i.offsetHeight*this.bt()*this.h,i=i-this.Ot()+this.options.q,s=s-this.Zt()+this.options.Y,n=Math.max(i,0),h=Math.max(s,0),i=Math.min(i,0)-this.options.q,s=Math.min(s,0)-this.options.Y;return{x:Math.min(Math.max(t.x,i),n),y:Math.min(Math.max(t.y,s),h)}},gt:function(t,i){this.scale(t/this.h,i)},scale:function(t,i){t={x:((t=this.Dt(t))-1)*(i.x+this.offset.x),y:(t-1)*(i.y+this.offset.y)};this.Pt(t),triggerEvent(this.i,this.options.k),"function"==typeof this.options.R&&this.options.R(this,event)},Dt:function(t){var i=this.h;return this.h*=t,this.h=Math.min(this.options.maxZoom,Math.max(this.h,this.options.minZoom)),this.h/i},Nt:function(){return this.options.D||(t=this.h,!((i=1)-.01<t&&t<i+.01));var t,i},et:function(t,i){i&&(this.options.P?Math.abs(t.x-i.x)>Math.abs(t.y-i.y)?this.Pt({x:-(t.x-i.x),y:0}):this.Pt({y:-(t.y-i.y),x:0}):this.Pt({y:-(t.y-i.y),x:-(t.x-i.x)}),triggerEvent(this.i,this.options.I),"function"==typeof this.options.X)&&this.options.X(this,event)},lt:function(t){return this.Tt(t)},Tt:function(t){return{x:t.map(function(t){return t.x}).reduce(i)/t.length,y:t.map(function(t){return t.y}).reduce(i)/t.length}},Pt:function(t){this.offset={x:this.offset.x+t.x,y:this.offset.y+t.y}},_t:function(){this.h<this.options.Z?this.jt():this.kt(this.offset)&&this.Ct()},kt:function(t){var i=this.ot(t);return i.x!==t.x||i.y!==t.y},Ct:function(){var i=this.ot(this.offset),s=this.offset.x,n=this.offset.y,t=function(t){this.offset.x=s+t*(i.x-s),this.offset.y=n+t*(i.y-n),this.update()}.bind(this);this.animate(this.options.animationDuration,t,this.Et)},jt:function(){var i,s,t;1!==this.h&&(i=this.h,s=this.zt(),t=function(t){this.gt(i+t*(1-i),s)}.bind(this),this.animate(this.options.animationDuration,t,this.Et))},M:function(){this.Ft(),this.It(this.Mt.parentElement.offsetHeight)},bt:function(){var t=this.Mt.offsetWidth/this.i.offsetWidth,i=this.Mt.offsetHeight/this.i.offsetHeight;return Math.min(t,i)},St:function(){return this.i.offsetWidth/this.i.offsetHeight},zt:function(){var t=this.offset.x-this.u.x,t=-1*this.offset.x-t/(1/this.h-1),i=this.offset.y-this.u.y;return{x:t,y:-1*this.offset.y-i/(1/this.h-1)}},nt:function(t){var i=this.Mt.getBoundingClientRect(),s=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollLeft||document.body.scrollLeft,h=i.top+s,e=i.left+n;return t.touches?Array.prototype.slice.call(t.touches).map(function(t){return{x:t.pageX-e,y:t.pageY-h}}):[{x:t.pageX-e,y:t.pageY-h}]},ht:function(t){var i=this.Mt.getBoundingClientRect(),s=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollLeft||document.body.scrollLeft,s=i.top+s,i=i.left+n;return{x:t.pageX-i,y:t.pageY-s}},animate:function(s,n,h,e){var o=(new Date).getTime(),a=function(){var t,i;this.Ut&&(i=(t=(new Date).getTime()-o)/s,s<=t?(n(1),e&&e(),this.update(),this.$(),this.update()):(h&&(i=h(i)),n(i),this.update(),requestAnimationFrame(a)))}.bind(this);this.Ut=!0,requestAnimationFrame(a)},$:function(){this.Ut=!1},Et:function(t){return-Math.cos(t*Math.PI)/2+.5},Ot:function(){return this.Mt.offsetWidth},Zt:function(){return this.Mt.offsetHeight},It:function(t){return this.Mt.style.height=t+"px"},Ft:function(){this.Mt.style.height=null},v:function(){this.Mt=document.querySelector("div.pinch-zoom-container"),this.Mt||(this.Mt=buildElement('<div class="pinch-zoom-container"></div>'),this.i.parentNode.insertBefore(this.Mt,this.i),this.Mt.appendChild(this.i)),this.Mt.style.overflow="auto",this.Mt.style.position="relative",this.i.style.webkitTransformOrigin="0% 0%",this.i.style.Wt="0% 0%",this.i.style.msTransformOrigin="0% 0%",this.i.style.Yt="0% 0%",this.i.style.transformOrigin="0% 0%",this.i.style.position="absolute",this.i.style.backfaceVisibility="hidden",this.i.style.willChange="transform"},end:function(){this.it=!1,this._t(),this.update()},g:function(){var i=this;s(this.Mt,this,this.i),this.qt=this.update.bind(this),window.addEventListener("resize",this.qt),Array.from(this.i.querySelectorAll("img")).forEach(function(t){t.addEventListener("load",i.update.bind(i))}),"IMG"===this.i.nodeName&&this.i.addEventListener("load",this.update.bind(this))},update:function(t){t&&"resize"===t.type&&(this.M(),this.A()),t&&"load"===t.type&&(this.M(),this.A()),this.Gt||(this.Gt=!0,window.setTimeout(function(){this.Gt=!1;var t=this.bt()*this.h,i=-this.offset.x/t,s=-this.offset.y/t,n="scale3d("+t+", "+t+",1) translate3d("+i+"px,"+s+"px,0px)",t="scale("+t+", "+t+") translate("+i+"px,"+s+"px)",i=function(){this.clone&&(this.clone.parentNode.removeChild(this.clone),delete this.clone)}.bind(this);!this.options.T||this.it||this.Ut?(this.Lt=!0,i(),this.i.style.webkitTransform=n,this.i.style.Rt=t,this.i.style.msTransform=t,this.i.style.Ht=t,this.i.style.transform=n):(this.Lt&&(this.clone=this.i.cloneNode(!0),this.clone.style.pointerEvents="none",this.Mt.appendChild(this.clone),window.setTimeout(i,200)),this.i.style.webkitTransform=t,this.i.style.Rt=t,this.i.style.msTransform=t,this.i.style.Ht=t,this.i.style.transform=t,this.Lt=!1)}.bind(this),0))},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},destroy:function(){window.removeEventListener("resize",this.qt),this.Mt&&(this.Mt.remove(),this.Mt=null)},reset:function(){this.h=1,this.o=1,this.offset={x:0,y:0},this.u={x:0,y:0},this.v(),this.g(),this.update(),this.p(this.i)&&(this.M(),this.A()),this.enable()}};var s=function(t,s,i){function n(t,i){if(r!==t){if(r&&!t)switch(r){case"zoom":s.vt(i);break;case"drag":s.rt(i)}switch(t){case"zoom":s.ut(i);break;case"drag":s.K(i)}}r=t}function h(t){2===u?n("zoom"):1===u&&s.Nt()?n("drag",t):n(null,t)}function e(t){return Array.from(t).map(function(t){return{x:t.pageX,y:t.pageY}})}function o(t,i){var s=t.x-i.x,t=t.y-i.y;return Math.sqrt(s*s+t*t)}function a(t){t.stopPropagation(),t.preventDefault()}var r=null,u=0,c=null,f=null,d=!1,l=!0;t.addEventListener("touchstart",function(t){if(s.enabled){l=!0,u=t.touches.length;var i=t,t=(new Date).getTime();if(t-(c=1<u?null:c)<300)switch(a(i),s.handleDoubleTap(i),r){case"zoom":s.vt(i);break;case"drag":s.rt(i)}else s.yt=!1;1===u&&(c=t)}},{passive:!1}),i.addEventListener("click",function(t){!s.enabled||d||s.l||(a(t=t),s.handleDoubleTap(t))},{passive:!1}),t.addEventListener("touchmove",function(t){if(s.enabled&&!s.yt){if(l)h(t),r&&a(t),f=e(t.touches);else{switch(r){case"zoom":2==f.length&&2==t.touches.length&&s.dt(t,function(t,i){t=o(t[0],t[1]);return o(i[0],i[1])/t}(f,e(t.touches)));break;case"drag":s.st(t)}r&&(a(t),s.update())}l=!1}},{passive:!1}),t.addEventListener("touchend",function(t){s.enabled&&(u=t.touches.length,h(t))}),s.options._&&(i.addEventListener("mousedown",function(t){s.enabled&&(l=!0,d=!(u=1))},{passive:!0}),i.addEventListener("mousemove",function(t){s.enabled&&(l?(h(t),r&&a(t)):("drag"===r&&(d=!0,s.st(t)),r&&(a(t),s.update())),l=!1)},{passive:!1}),i.addEventListener("mouseup",function(t){s.enabled&&(u=0,h(t))},{passive:!0}))};return t},PinchZoom=definePinchZoom();export default PinchZoom;