"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,i){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),h=1;h<arguments.length;h++){var n=arguments[h];if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(s[e]=n[e])}return s},writable:!0,t:!0}),"function"!=typeof Array.from&&(Array.from=function(t){return[].slice.call(t)});var h=function(t){var i=document.implementation.createHTMLDocument("");return i.body.innerHTML=t,Array.from(i.body.children)[0]},e=function(t,i){var s=document.createEvent("HTMLEvents");s.initEvent(i,!0,!1),t.dispatchEvent(s)},t=function(){function t(t,i){this.i=t,this.h=1,this.o=1,this.offset={x:0,y:0},this.u={x:0,y:0},this.options=Object.assign({},this.l,i),this.m(),this.v(),this.update(),this.p(this.i)&&(this.g(),this.M()),this.enable()}function i(t,i){return t+i}t.prototype={l:{O:2,A:1.3,animationDuration:300,maxZoom:4,minZoom:.5,D:!0,Z:!1,k:!1,C:!0,N:!1,T:"pz_zoomstart",_:"pz_zoomupdate",j:"pz_zoomend",F:"pz_dragstart",I:"pz_dragupdate",S:"pz_dragend",U:"pz_doubletap",W:"pz_mousewheel",P:0,Y:0,q:null,G:null,L:null,R:null,H:null,V:null,X:null,B:null},J:function(t){e(this.i,this.options.F),"function"==typeof this.options.R&&this.options.R(this,t),this.K(),this.$=!1,this.tt=!0,this.it(t)},it:function(t){"touchend"!==t.type&&(t="touchmove"===t.type?this.st(t)[0]:this.ht(t),this.nt(t,this.$),this.offset=this.et(this.offset),this.$=t)},ot:function(){e(this.i,this.options.S),"function"==typeof this.options.H&&this.options.H(this,event),this.end()},ut:function(t){e(this.i,this.options.T),"function"==typeof this.options.q&&this.options.q(this,t),this.K(),this.o=1,this.rt=0,this.ct=!1,this.tt=!0},ft:function(t,i){var t=this.dt(this.st(t)),s=i/this.o;this.o=i,this.rt+=1,3<this.rt&&(this.scale(s,t),this.nt(t,this.ct)),this.ct=t},lt:function(){e(this.i,this.options.j),"function"==typeof this.options.G&&this.options.G(this,event),this.end()},vt:function(t){var i=this.st(t)[0],s=1<this.h?1:this.options.O,h=this.h,n=function(t){this.gt(h+t*(s-h),i)}.bind(this);this.tt||(this.yt=!0,s<h&&(i=this.zt()),this.animate(this.options.animationDuration,n,this.Mt),e(this.i,this.options.U),"function"==typeof this.options.X&&this.options.X(this,t))},xt:function(t){var i=this.ht(t),s=Math.min(Math.max(this.options.minZoom,this.o+-.01*t.deltaY),this.options.maxZoom),h=s/this.o;this.scale(h,i),this.o=s,this.update(),e(this.i,this.options.W),"function"==typeof this.options.B&&this.options.B(this,t)},bt:function(){this.u={x:-Math.abs(this.i.offsetWidth*this.wt()-this.Et.offsetWidth)/2,y:-Math.abs(this.i.offsetHeight*this.wt()-this.Et.offsetHeight)/2}},Ot:function(){this.offset.x=this.u.x,this.offset.y=this.u.y},p:function(t){return"IMG"===t.nodeName?t.complete&&0!==t.naturalHeight:Array.from(t.querySelectorAll("img")).every(this.p)},M:function(){this.options.k&&this.At||(this.At=!0,this.bt(),this.Ot())},et:function(t){var i=this.i.offsetWidth*this.wt()*this.h,s=this.i.offsetHeight*this.wt()*this.h,i=i-this.Dt()+this.options.Y,s=s-this.Zt()+this.options.P,h=Math.max(i,0),n=Math.max(s,0),i=Math.min(i,0)-this.options.Y,s=Math.min(s,0)-this.options.P;return{x:Math.min(Math.max(t.x,i),h),y:Math.min(Math.max(t.y,s),n)}},gt:function(t,i){this.scale(t/this.h,i)},scale:function(t,i){t={x:((t=this.kt(t))-1)*(i.x+this.offset.x),y:(t-1)*(i.y+this.offset.y)};this.Ct(t),e(this.i,this.options._),"function"==typeof this.options.L&&this.options.L(this,event)},kt:function(t){var i=this.h;return this.h*=t,this.h=Math.min(this.options.maxZoom,Math.max(this.h,this.options.minZoom)),this.h/i},Nt:function(){return this.options.D||(t=this.h,!((i=1)-.01<t&&t<i+.01));var t,i},nt:function(t,i){i&&(this.options.Z?Math.abs(t.x-i.x)>Math.abs(t.y-i.y)?this.Ct({x:-(t.x-i.x),y:0}):this.Ct({y:-(t.y-i.y),x:0}):this.Ct({y:-(t.y-i.y),x:-(t.x-i.x)}),e(this.i,this.options.I),"function"==typeof this.options.V)&&this.options.V(this,event)},dt:function(t){return this.Tt(t)},Tt:function(t){return{x:t.map(function(t){return t.x}).reduce(i)/t.length,y:t.map(function(t){return t.y}).reduce(i)/t.length}},Ct:function(t){this.offset={x:this.offset.x+t.x,y:this.offset.y+t.y}},_t:function(){this.h<this.options.A?this.jt():this.Ft(this.offset)&&this.It()},Ft:function(t){var i=this.et(t);return i.x!==t.x||i.y!==t.y},It:function(){var i=this.et(this.offset),s=this.offset.x,h=this.offset.y,t=function(t){this.offset.x=s+t*(i.x-s),this.offset.y=h+t*(i.y-h),this.update()}.bind(this);this.animate(this.options.animationDuration,t,this.Mt)},jt:function(){var i,s,t;1!==this.h&&(i=this.h,s=this.zt(),t=function(t){this.gt(i+t*(1-i),s)}.bind(this),this.animate(this.options.animationDuration,t,this.Mt))},g:function(){this.St(),this.Ut(this.Et.parentElement.offsetHeight)},wt:function(){var t=this.Et.offsetWidth/this.i.offsetWidth,i=this.Et.offsetHeight/this.i.offsetHeight;return Math.min(t,i)},Wt:function(){return this.i.offsetWidth/this.i.offsetHeight},zt:function(){var t=this.offset.x-this.u.x,t=-1*this.offset.x-t/(1/this.h-1),i=this.offset.y-this.u.y;return{x:t,y:-1*this.offset.y-i/(1/this.h-1)}},st:function(t){var i=this.Et.getBoundingClientRect(),s=document.documentElement.scrollTop||document.body.scrollTop,h=document.documentElement.scrollLeft||document.body.scrollLeft,n=i.top+s,e=i.left+h;return"mouseup"===t.type||"click"===t.type?[{x:t.pageX-e,y:t.pageY-n}]:Array.prototype.slice.call(t.touches).map(function(t){return{x:t.pageX-e,y:t.pageY-n}})},ht:function(t){var i=this.Et.getBoundingClientRect(),s=document.documentElement.scrollTop||document.body.scrollTop,h=document.documentElement.scrollLeft||document.body.scrollLeft,s=i.top+s,i=i.left+h;return{x:t.pageX-i,y:t.pageY-s}},animate:function(s,h,n,e){var o=(new Date).getTime(),a=function(){var t,i;this.Pt&&(i=(t=(new Date).getTime()-o)/s,s<=t?(h(1),e&&e(),this.update(),this.K(),this.update()):(n&&(i=n(i)),h(i),this.update(),requestAnimationFrame(a)))}.bind(this);this.Pt=!0,requestAnimationFrame(a)},K:function(){this.Pt=!1},Mt:function(t){return-Math.cos(t*Math.PI)/2+.5},Dt:function(){return this.Et.offsetWidth},Zt:function(){return this.Et.offsetHeight},Ut:function(t){return this.Et.style.height=t+"px"},St:function(){this.Et.style.height=null},m:function(){this.Et=document.querySelector("div.pinch-zoom-container"),this.Et||(this.Et=h('<div class="pinch-zoom-container"></div>'),this.i.parentNode.insertBefore(this.Et,this.i),this.Et.appendChild(this.i)),this.Et.style.overflow="hidden",this.Et.style.position="relative",this.i.style.webkitTransformOrigin="0% 0%",this.i.style.Yt="0% 0%",this.i.style.msTransformOrigin="0% 0%",this.i.style.qt="0% 0%",this.i.style.transformOrigin="0% 0%",this.i.style.position="absolute",this.i.style.backfaceVisibility="hidden",this.i.style.willChange="transform"},end:function(){this.tt=!1,this._t(),this.update()},v:function(){var i=this;s(this.Et,this,this.i),this.Gt=this.update.bind(this),window.addEventListener("resize",this.Gt),Array.from(this.i.querySelectorAll("img")).forEach(function(t){t.addEventListener("load",i.update.bind(i))}),"IMG"===this.i.nodeName&&this.i.addEventListener("load",this.update.bind(this))},update:function(t){t&&"resize"===t.type&&(this.g(),this.M()),t&&"load"===t.type&&(this.g(),this.M()),this.Lt||(this.Lt=!0,window.setTimeout(function(){this.Lt=!1;var t=this.wt()*this.h,i=-this.offset.x/t,s=-this.offset.y/t,h="scale3d("+t+", "+t+",1) translate3d("+i+"px,"+s+"px,0px)",t="scale("+t+", "+t+") translate("+i+"px,"+s+"px)",i=function(){this.clone&&(this.clone.parentNode.removeChild(this.clone),delete this.clone)}.bind(this);!this.options.C||this.tt||this.Pt?(this.Rt=!0,i(),this.i.style.webkitTransform=h,this.i.style.Ht=t,this.i.style.msTransform=t,this.i.style.Vt=t,this.i.style.transform=h):(this.Rt&&(this.clone=this.i.cloneNode(!0),this.clone.style.pointerEvents="none",this.Et.appendChild(this.clone),window.setTimeout(i,200)),this.i.style.webkitTransform=t,this.i.style.Ht=t,this.i.style.msTransform=t,this.i.style.Vt=t,this.i.style.transform=t,this.Rt=!1)}.bind(this),0))},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},Xt:function(){window.removeEventListener("resize",this.Gt),this.Et&&(this.Et.remove(),this.Et=null)},reset:function(){this.h=1,this.o=1,this.offset={x:0,y:0},this.u={x:0,y:0},this.m(),this.v(),this.update(),this.p(this.i)&&(this.g(),this.M()),this.enable()}};var s=function(t,s,i){function h(t,i){if(u!==t){if(u&&!t)switch(u){case"zoom":s.lt(i);break;case"drag":s.ot(i)}switch(t){case"zoom":s.ut(i);break;case"drag":s.J(i)}}u=t}function n(t){2===r?h("zoom"):1===r&&s.Nt()?h("drag",t):h(null,t)}function e(t){return Array.from(t).map(function(t){return{x:t.pageX,y:t.pageY}})}function o(t,i){var s=t.x-i.x,t=t.y-i.y;return Math.sqrt(s*s+t*t)}function a(t){t.stopPropagation(),t.preventDefault()}var u=null,r=0,c=null,f=null,d=!1,l=!0;t.addEventListener("touchstart",function(t){if(s.enabled){l=!0,r=t.touches.length;var i=t,t=(new Date).getTime();if(t-(c=1<r?null:c)<300)switch(a(i),s.vt(i),u){case"zoom":s.lt(i);break;case"drag":s.ot(i)}else s.yt=!1;1===r&&(c=t)}},{passive:!1}),i.addEventListener("click",function(t){if(s.enabled&&!d&&"mouse"===t.pointerType){var i=t;switch(a(i),s.vt(i),u){case"zoom":s.lt(i);break;case"drag":s.ot(i)}}},{passive:!1}),t.addEventListener("touchmove",function(t){if(s.enabled&&!s.yt){if(l)n(t),u&&a(t),f=e(t.touches);else{switch(u){case"zoom":2==f.length&&2==t.touches.length&&s.ft(t,function(t,i){t=o(t[0],t[1]);return o(i[0],i[1])/t}(f,e(t.touches)));break;case"drag":s.it(t)}u&&(a(t),s.update())}l=!1}},{passive:!1}),t.addEventListener("touchend",function(t){s.enabled&&(r=t.touches.length,n(t))}),s.options.N&&(t.addEventListener("mousewheel",function(t){s.enabled&&(a(t),s.xt(t))}),t.addEventListener("mousedown",function(t){s.enabled&&(l=!0,d=!(r=1))},{passive:!0}),t.addEventListener("mousemove",function(t){s.enabled&&(l?(n(t),u&&a(t)):("drag"===u&&(d=!0,s.it(t)),u&&(a(t),s.update())),l=!1)},{passive:!1}),t.addEventListener("mouseup",function(t){s.enabled&&(r=0,n(t))},{passive:!0}))};return t},PinchZoom=t();export default PinchZoom;